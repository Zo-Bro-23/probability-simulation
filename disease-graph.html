<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    fetch('/backend').then(r => {r.text().then(res => {draw_total(JSON.parse(res).total); draw_positive(JSON.parse(res).positive)})})
    function draw_total(rawData){
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable(rawData);

        var options = {
          title: 'Disease test effectiveness',
          is3D: true,
        };

        var chart = new google.visualization.PieChart(document.getElementById('total_chart'));
        chart.draw(data, options);
      }
    }
    function draw_positive(rawData){
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable(rawData);

        var options = {
          title: 'Positive test accuracy',
          is3D: true,
        };

        var chart = new google.visualization.PieChart(document.getElementById('positive_chart'));
        chart.draw(data, options);
      }
    }
    </script>
  </head>
  <body>
    <table class="columns">
      <tr>
        <td><div id="total_chart" style="border: 1px solid #ccc"></div></td>
        <td><div id="positive_chart" style="border: 1px solid #ccc"></div></td>
      </tr>
    </table>
  </body>
</html>